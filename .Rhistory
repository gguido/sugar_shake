barplot(counts[1,], main="Infestazione delle api adulte",
xlab="Famiglie", col=c(rep("black",dim(datafb)[1]),rep("red",dim(dataplac)[1]),ylab="Varroe/900 api")
barplot(counts[1,], main="Infestazione delle api adulte",
barplot(counts[1,], main="Infestazione delle api adulte",
xlab="Famiglie", col=c(rep("black",dim(datafb)[1]),rep("red",dim(dataplac)[1])),ylab="Varroe/900 api")
barplot(counts[2,], main="Infestazione delle api adulte un mese dopo il trattamento",
xlab="Famiglie", col=c(rep("black",dim(datafb)[1]),rep("red",dim(dataplac)[1])),ylab="Varroe/900 api")
barplot(counts[1,], main="Infestazione delle api adulte prima del trattamento",
xlab="Famiglie", col=c(rep("black",dim(datafb)[1]),rep("red",dim(dataplac)[1])),ylab="Varroe/900 api",yscale=0:35)
barplot(counts[1,], main="Infestazione delle api adulte prima del trattamento",
xlab="Famiglie", col=c(rep("black",dim(datafb)[1]),rep("red",dim(dataplac)[1])),ylab="Varroe/900 api",ylim=c(0,:35))
barplot(counts[1,], main="Infestazione delle api adulte prima del trattamento",
xlab="Famiglie", col=c(rep("black",dim(datafb)[1]),rep("red",dim(dataplac)[1])),ylab="Varroe/900 api",ylim=c(0,35))
barplot(counts[2,], main="Infestazione delle api adulte un mese dopo il trattamento",
xlab="Famiglie", col=c(rep("black",dim(datafb)[1]),rep("red",dim(dataplac)[1])),ylab="Varroe/900 api")
barplot(fboxi$aumentoperc[ordine], ylab="Variazione dell'infestazione (%)",
xlab="famiglie",col=coloritratt,main="Variazione dell'infestazione in un mese")
vals <- varEntryDialog(vars=c('Variable1', 'Variable2'))
#' Creates a dialog box using tcl/tk to get input from the user.
#'
#' This function will create a tcl/tk dialog box to get user input. It has been
#' written to be extensible so the R programmer can easily create a dialog with
#' any number of varaibles with custom labels and data conversion of the user
#' entered data. The function will return a list where the element names are
#' \code{vars} and the value is the user input. By default, all entry will be
#' converted using the \code{as.character} function. However, this can easily be
#' altered using the \code{fun} parameter. For example, if integers are required,
#' use \code{fun=c(as.integer, ...)}. It is also possible to write custom
#' functions that can serve as a data validation. See the examples.
#'
#' Adopted from Kay Cichini:
#' \url{http://thebiobucket.blogspot.com/2012/08/tcltk-gui-example-with-variable-input.html}
#' See also:
#' \url{http://bioinf.wehi.edu.au/~wettenhall/RTclTkExamples/OKCancelDialog.html}
#'
#' @param vars character list of variable names. These will be the element names
#' within the returned list.
#' @param labels the labels the user will see for each variable entry.
#' @param fun list of functions that converts the user input.
#' @param title the title of the dialog box.
#' @param prompt the prompt the user will see on the dialog box.
#' @return a \code{\link{list}} of named values entered by the user.
varEntryDialog <- function(vars,
labels = vars,
fun = rep(list(as.character), length(vars)),
title = 'Variable Entry',
prompt = NULL) {
require(tcltk)
stopifnot(length(vars) == length(labels), length(labels) == length(fun))
# Create a variable to keep track of the state of the dialog window:
# done = 0; If the window is active
# done = 1; If the window has been closed using the OK button
# done = 2; If the window has been closed using the Cancel button or destroyed
done <- tclVar(0)
tt <- tktoplevel()
tkwm.title(tt, title)
entries <- list()
tclvars <- list()
# Capture the event "Destroy" (e.g. Alt-F4 in Windows) and when this happens,
# assign 2 to done.
tkbind(tt,"<Destroy>",function() tclvalue(done)<-2)
for(i in seq_along(vars)) {
tclvars[[i]] <- tclVar("")
entries[[i]] <- tkentry(tt, textvariable=tclvars[[i]])
}
doneVal <- as.integer(tclvalue(done))
results <- list()
reset <- function() {
for(i in seq_along(entries)) {
tclvalue(tclvars[[i]]) <<- ""
}
}
reset.but <- tkbutton(tt, text="Reset", command=reset)
cancel <- function() {
tclvalue(done) <- 2
}
cancel.but <- tkbutton(tt, text='Cancel', command=cancel)
submit <- function() {
for(i in seq_along(vars)) {
tryCatch( {
results[[vars[[i]]]] <<- fun[[i]](tclvalue(tclvars[[i]]))
tclvalue(done) <- 1
},
error = function(e) { tkmessageBox(message=geterrmessage()) },
finally = { }
)
}
}
submit.but <- tkbutton(tt, text="Submit", command=submit)
if(!is.null(prompt)) {
tkgrid(tklabel(tt,text=prompt), columnspan=3, pady=10)
}
for(i in seq_along(vars)) {
tkgrid(tklabel(tt, text=labels[i]), entries[[i]], pady=10, padx=10, columnspan=4)
}
tkgrid(submit.but, cancel.but, reset.but, pady=10, padx=10, columnspan=3)
tkfocus(tt)
# Do not proceed with the following code until the variable done is non-zero.
# (But other processes can still run, i.e. the system is not frozen.)
tkwait.variable(done)
if(tclvalue(done) != 1) {
results <- NULL
}
tkdestroy(tt)
return(results)
}
if(FALSE) { #Test the dialog
vals <- varEntryDialog(vars=c('Variable1', 'Variable2'))
str(vals)
vals <- varEntryDialog(vars=c('Var1', 'Var2'),
labels=c('Enter an integer:', 'Enter a string:'),
fun=c(as.integer, as.character))
str(vals)
#Add a custom validation function
vals <- varEntryDialog(vars=c('Var1'),
labels=c('Enter an integer between 0 and 10:'),
fun=c(function(x) {
x <- as.integer(x)
if(x >= 0 & x <= 10) {
return(x)
} else {
stop("Why didn't you follow instruction!\nPlease enter a number between 0 and 10.")
}
} ))
str(vals)
#Return a list
vals <- varEntryDialog(vars=c('Var1'),
labels=c('Enter a comma separated list of something:'),
fun=c(function(x) {
return(strsplit(x, split=','))
}))
vals$Var1
str(vals)
}
vals <- varEntryDialog(vars=c('Variable1', 'Variable2'))
vals
formicobox_blocco_conteggi <- read.csv("~/Documenti/importanza_1_sync/unaapi/Sperimentazioni/Formicobox/formicobox_blocco_conteggi.csv", sep=";", dec=",")
View(formicobox_blocco_conteggi)
?merge
detach()
rm(list=ls())
fbox <- read.csv("./formicobox_mombasiglio.csv", sep=";")
View(fbox)
formicobox_blocco_conteggi <- read.csv("~/Documenti/importanza_1_sync/unaapi/Sperimentazioni/Formicobox/formicobox_blocco_conteggi.csv", sep=";", dec=",")
View(formicobox_blocco_conteggi)
formicobox_blocco_conteggi
plot(formicobox_blocco_conteggi[,2:8])
?merge
View(fbox)
merge(formicobox_blocco_conteggi,fbox,by.x=alveare,by.y=cassa)
merge(formicobox_blocco_conteggi,fbox,by.x="alveare",by.y="cassa")
formicobox_blocco_conteggi <- read.csv("~/Documenti/importanza_1_sync/unaapi/Sperimentazioni/Formicobox/formicobox_blocco_conteggi.csv", sep=";", dec=",")
merge(formicobox_blocco_conteggi,fbox,by.x="alveare",by.y="cassa")->fbox_blocco
View(fbox_blocco)
detach()
rm(list=ls())
fbox <- read.csv("./formicobox_mombasiglio.csv", sep=";")
attach(fbox)
fbox$tratt<-c(rep("fb",48),rep("plac",48))   #trattamenti: formicobox, placebo
fbox$ss9_bt=ss300_bt_1+ss300_bt_2+ss300_bt_3 #totale zucchero prima trattamento
fbox$ss9_at=ss300_at_1+ss300_at_2+ss300_at_3 #totale zucchero dopo trattamento
fbox$ss9_at2=ss300_at2_1+ss300_at2_2+ss300_at2_3 #totale zucchero dopo secondo trattamento
detach(fbox)
formicobox_blocco_conteggi <- read.csv("~/Documenti/importanza_1_sync/unaapi/Sperimentazioni/Formicobox/formicobox_blocco_conteggi.csv", sep=";", dec=",")
merge(formicobox_blocco_conteggi,fbox,by.x="alveare",by.y="cassa")->fbox_blocco
View(fbox_blocco)
View(fbox_blocco)
(fbox_blocco$ss9_at-fbox_blocco$ss9_at2)/fbox_blocco$ss9_at
plot((fbox_blocco$ss9_at-fbox_blocco$ss9_at2)/fbox_blocco$ss9_at,fbox_blocco$efficacia..)
(fbox_blocco$ss9_at-fbox_blocco$ss9_at2)/fbox_blocco$ss9_at->eff_arg
plot(eff_arg[tratt.x=="ctr"],fbox_blocco$efficacia..[fbox_blocco$tratt.x=="ctr"])
plot(eff_arg[fbox_blocco$tratt.x=="ctr"],fbox_blocco$efficacia..[fbox_blocco$tratt.x=="ctr"])
plot(eff_arg[fbox_blocco$tratt.x=="fbox"],fbox_blocco$efficacia..[fbox_blocco$tratt.x=="fbox"])
plot(eff_arg[fbox_blocco$tratt.x=="ctr"],fbox_blocco$efficacia..[fbox_blocco$tratt.x=="ctr"])
plot(eff_arg[fbox_blocco$tratt.x=="ctr",],fbox_blocco$efficacia..[fbox_blocco$tratt.x=="ctr"],)
plot(eff_arg[fbox_blocco$tratt.x=="ctr"],fbox_blocco$efficacia..[fbox_blocco$tratt.x=="ctr"])
View(fbox_blocco)
plot(fbox_blocco$fbox_blocco
plot(fbox_blocco$fbox_blocco
plot(fbox_blocco$ss9_at2,fbox_blocco$Tot.con)
cor(fbox_blocco$ss9_at2,fbox_blocco$Tot.con)
cov(fbox_blocco$ss9_at2,fbox_blocco$Tot.con)
cor(fbox_blocco$ss9_at2,fbox_blocco$Tot.con)
formicobox_blocco_conteggi <- read.csv("~/Documenti/importanza_1_sync/unaapi/Sperimentazioni/Formicobox/formicobox_blocco_conteggi.csv", sep=";", dec=",")
merge(formicobox_blocco_conteggi,fbox,by.x="alveare",by.y="cassa")->fbox_blocco
cor(fbox_blocco$ss9_at2,fbox_blocco$Tot.con)
plot(fbox_blocco$ss9_at2,fbox_blocco$Tot.con)
plot(fbox_blocco$ss9_at2[-7],fbox_blocco$Tot.con[-7])
fbox_blocco
View(fbox_blocco)
plot(fbox_blocco$ss9_at2[-6],fbox_blocco$Tot.con[-6])
cor(fbox_blocco$ss9_at2[-6],fbox_blocco$Tot.con[-6])
cor(fbox_blocco$ss9_at2[-6:7],fbox_blocco$Tot.con[-6:7])
cor(fbox_blocco$ss9_at2[-(6:7)],fbox_blocco$Tot.con[-(6:7)])
plot(fbox_blocco$ss9_at2[-(6:7)],fbox_blocco$Tot.con[-(6:7)])
str(fbox_blocco)
?date
as.Date(15/7/2912)
as.Date("15/7/2012")
as.Date("2012/7/15")
str(as.Date("2012/7/15"))
as.Date(c("2012/7/15","2012/07/18")
)
as.Date(c("2012/7/15","2012/07/18","2012/7/22"))
as.Date(c("2012/7/15","2012/07/18","2012/7/22","2012/07/26","2012/7/30","2012/08/3","2012/08/7","2012/08/10","2012/08/13"))
as.Date(c("2012/7/15","2012/07/18","2012/7/22","2012/07/26","2012/7/30","2012/08/3","2012/08/7","2012/08/10","2012/08/13"))->Dates.cad
fbox_blocco[,c(3:9,11:13)]
fbox_blocco[fbox_blocco$tratt.x=="ctr",c(3:9,11:13)]
fbox_blocco[fbox_blocco$tratt.x=="ctr",c(3:9,11:13)]->cadute_fbox
cadute_fbox
fbox_blocco[fbox_blocco$tratt.x=="fbox",c(3:9,11:13)]->cadute_fbox
cadute_fbox
?margin.table
apply(cadute_fbox,2,mean)
plot(Dates.cad,apply(cadute_fbox,2,mean))
plot(Dates.cad)
Dates.cad
length(Dates.cad)
length(apply(cadute_fbox,2,mean))
as.Date(c("2012/7/15","2012/07/18","2012/7/22","2012/07/26","2012/7/30","2012/08/3","2012/08/7","2012/08/8","2012/08/10","2012/08/13"))->Dates.cad
plot(Dates.cad,apply(cadute_fbox,2,mean))
fbox_blocco[fbox_blocco$tratt.x=="fbox",c(3:9,11:13)]->cadute_fbox
plot(Dates.cad,apply(cadute_fbox,2,mean),type="l")
plot(Dates.cad,apply(cadute_ctr,2,mean),type="l")
fbox_blocco[fbox_blocco$tratt.x=="ctr",c(3:9,11:13)]->cadute_ctr
fbox_blocco[fbox_blocco$tratt.x=="fbox",c(3:9,11:13)]->cadute_fbox
plot(Dates.cad,apply(cadute_fbox,2,mean),type="l")
plot(Dates.cad,apply(cadute_ctr,2,mean),type="l")
plot(Dates.cad,apply(cadute_fbox,2,mean),type="l")
boxplot(cadute_fbox~Dates.cad)
?boxplot
sum(cadute_ctr)
sum(cadute_fbox)
sum(apply(cadute_fbox,2,mean))
sum(apply(cadute_ctr,2,mean))
str(fbox_blocco)
mean(fbox_blocco$Z3[fbox_blocco$tratt.x=="fbox"])
mean(fbox_blocco$Z3[fbox_blocco$tratt.x=="ctr"])
mean(fbox_blocco$Z2[fbox_blocco$tratt.x=="ctr"])
mean(fbox_blocco$Z2[fbox_blocco$tratt.x=="fbox"])
boxplot(fbox_blocco$Z2~fbox_blocco$tratt.x)
detach()
rm(list=ls())
fbox <- read.csv("./formicobox_mombasiglio.csv", sep=";")
attach(fbox)
fbox$tratt<-c(rep("fb",48),rep("plac",48))   #trattamenti: formicobox, placebo
fbox$ss9_bt=ss300_bt_1+ss300_bt_2+ss300_bt_3 #totale zucchero prima trattamento
fbox$ss9_at=ss300_at_1+ss300_at_2+ss300_at_3 #totale zucchero dopo trattamento
fbox$ss9_at2=ss300_at2_1+ss300_at2_2+ss300_at2_3 #totale zucchero dopo secondo trattamento
detach(fbox)
attach(fbox)
!is.na(ss9_at-ss9_bt)->include #escluse casse con valori NA
ss9_bt<11 & include ->include #escluse casse con altissima infestazione
detach(fbox)
fboxi<-fbox[include,] #dataset delle casse in analisi
rm(include)
fboxi<-fboxi[order(fboxi$ss9_bt),]
attach(fboxi)
n_plac<-length(ss9_bt[tratt=="plac"]) #numero di casse placebo
n_fb<-length(ss9_bt[tratt=="fb"]) #numero casse formicobox
fboxi$eff_log<-log(ss9_at+0.5)-log(ss9_bt+0.5)
fboxi$aumento<-(ss9_at+1)/(ss9_bt+1)
detach(fboxi)
attach(fboxi)
boxplot(eff_log~tratt)
boxplot(aumento~tratt)
detach(fboxi)
dataplac<-fboxi[fboxi$tratt=="plac",]
datafb<-fboxi[fboxi$tratt=="fb",]
attach(dataplac)
plot(ss9_bt,ss9_at)
abline(ss9_bt,ss9_at)
#plot(glm(ss9_at~sqrt(ss9_bt),family=poisson))
detach(dataplac)
attach(datafb)
points(ss9_bt,ss9_at,pch=3)
abline(ss9_bt,ss9_at)
mean(eff_log)
exp(mean(eff_log))#non sicuro della trasformazione
mean(aumento)
mss9fbbt<-mean(ss9_bt)
mss9fbat<-mean(ss9_at)
mss9fbat/mss9fbbt->m_eff_fb
detach(datafb)
attach(dataplac)
mean(eff_log)
exp(mean(eff_log))#non sicuro della trasformazione
mean(aumento)
mss9placbt<-mean(ss9_bt)
mss9placat<-mean(ss9_at)
(mss9placat)/mss9placbt->m_eff_plac
detach(dataplac)
((mss9fbbt*m_eff_plac)-mss9fbat)/(mss9fbbt*m_eff_plac)
(fbox_blocco$Z3[fbox_blocco$tratt.x=="fbox"])/(fbox_blocco$Z2[fbox_blocco$tratt.x=="fbox"])
formicobox_blocco_conteggi <- read.csv("~/Documenti/importanza_1_sync/unaapi/Sperimentazioni/Formicobox/formicobox_blocco_conteggi.csv", sep=";", dec=",")
merge(formicobox_blocco_conteggi,fbox,by.x="alveare",by.y="cassa")->fbox_blocco
as.Date(c("2012/7/15","2012/07/18","2012/7/22","2012/07/26","2012/7/30","2012/08/3","2012/08/7","2012/08/8","2012/08/10","2012/08/13"))->Dates.cad
fbox_blocco[fbox_blocco$tratt.x=="ctr",c(3:9,11:13)]->cadute_ctr
fbox_blocco[fbox_blocco$tratt.x=="fbox",c(3:9,11:13)]->cadute_fbox
plot(Dates.cad,apply(cadute_fbox,2,mean),type="l")
plot(Dates.cad,apply(cadute_ctr,2,mean),type="l")
mean(fbox_blocco$Z2[fbox_blocco$tratt.x=="ctr"])
mean(fbox_blocco$Z2[fbox_blocco$tratt.x=="fbox"])
boxplot(fbox_blocco$Z2~fbox_blocco$tratt.x)
(fbox_blocco$Z3[fbox_blocco$tratt.x=="fbox"])/(fbox_blocco$Z2[fbox_blocco$tratt.x=="fbox"])
sum(cadute_fbox)
sum(cadute_ctr)
sum(apply(cadute_fbox,2,mean))
sum(apply(cadute_ctr,2,mean))
plot(Dates.cad,apply(cadute_fbox,2,mean),type="l")
plot(Dates.cad,apply(cadute_ctr,2,mean),type="l")
plot(Dates.cad,apply(cadute_ctr,2,mean),type="l")
plot(Dates.cad,apply(cadute_ctr,2,mean),type="l")
plot(Dates.cad,apply(cadute_fbox,2,mean),type="l")
boxplot(fbox_blocco$Z2~fbox_blocco$tratt.x)
boxplot(fbox_blocco$Z3~fbox_blocco$tratt.x)
?boxplot
plot(Dates.cad,apply(cadute_fbox,2,mean),type="l")
fbox_blocco$Z2[fbox_blocco$tratt.x=="ctr"]
fbox_blocco[fbox_blocco$tratt.x=="ctr",c(3:9,11:13)]->cadute_ctr
cor(fbox_blocco$Z2[fbox_blocco$tratt.x=="fbox"],apply(cadute_fbox,1,mean))
cor(fbox_blocco$Z2[fbox_blocco$tratt.x=="fbox"],apply(cadute_fbox,1,sum))
cor(fbox_blocco$Z2[fbox_blocco$tratt.x=="ctr"],apply(cadute_ctr,1,sum))
#
detach()
rm(list=ls())
fbox <- read.csv("./data/formicobox_mombasiglio.csv", sep=";")
fbox
str(fbox)
rm(list=ls())
fbox <- read2.csv("./data/formicobox_mombasiglio.csv", sep=";")
rm(list=ls())
fbox <- read.csv2("./data/formicobox_mombasiglio.csv", sep=";")
fbox
str(fbox)
detach()
rm(list=ls())
fbox <- read.csv2("./data/formicobox_mombasiglio.csv", sep=";")
str(fbox)
sug_sett <- read.csv("~/Documenti/importanza_1_sync/unaapi/Sperimentazioni/Formicobox/data_oo/zuccheri_settembre.csv")
View(sug_sett)
str(sug_sett)
names(fbox)
names(fbox)<-c("hive","t0_ss300_1","t0_ss300_2","t0_ss300_3","t0_notes","t0_fbox_daytime","t1_ss300_1","t1_ss300_2","t1_ss300_3","t1_notes","t2_ss300_1","t2_ss300_2","t2_ss300_3","t2_notes","exp2")
write.csv(fbox, "./data/formicobox_mombasiglio.csv")
?merge
str(fbox)
names(fbox)<-c("id_hive","t0_ss300_1","t0_ss300_2","t0_ss300_3","t0_notes","t0_fbox_daytime","t1_ss300_1","t1_ss300_2","t1_ss300_3","t1_notes","t2_ss300_1","t2_ss300_2","t2_ss300_3","t2_notes","exp2")
write.csv(fbox, "./data/formicobox_mombasiglio.csv")
names(sug_sett)<-c("id_hive","t3_ss300_1","t3_ss300_2","t3_ss300_3","t3_notes","t3_id_op_ss")
str(merge(fbox,sug_sett,by="id_hive",all.x=T))
names(fbox)<-c("id_hive","t0_ss300_1","t0_ss300_2","t0_ss300_3","t0_notes","t0_fbox_daytime","t1_ss300_1","t1_ss300_2","t1_ss300_3","t1_notes","t2_ss300_1","t2_ss300_2","t2_ss300_3","t2_notes","exp2")
names(sug_sett)<-c("id_hive","t3_ss300_1","t3_ss300_2","t3_ss300_3","t3_notes","t3_id_op_ss")
fbox<-merge(fbox,sug_sett,by="id_hive",all.x=T)
write.csv(fbox, "./data/fbox_def.csv")
#
detach()
rm(list=ls())
fbox <- read.csv("./data/fbox_def.csv", sep=",")
fbox$t0_tratt<-c(rep("fb",48),rep("ctr",48))   #trattamenti: formicobox, placebo
fbox$t0_tratt<-c(rep("fb",48),rep("ctr",48))   #treatments: fbox, control
fbox$t0_ss900<-fbox$t0_ss300_1+fbox$t0_ss300_2+fbox$t0_ss300_3 #total sugar shake time 0
fbox$t1_ss900=ss300_at_1+ss300_at_2+ss300_at_3 #total sugar shake time 1
fbox$t0_ss900<- fbox$t0_ss300_1 + fbox$t0_ss300_2 + fbox$t0_ss300_3 #total sugar shake time 0
fbox$t1_ss900<- fbox$t1_ss300_1 + fbox$t1_ss300_2 + fbox$t1_ss300_3 #total sugar shake time 1
fbox$t2_ss900<- fbox$t2_ss300_1 + fbox$t2_ss300_2 + fbox$t2_ss300_3 #total sugar shake time 2
fbox$t3_ss900<- fbox$t3_ss300_1 + fbox$t3_ss300_2 + fbox$t3_ss300_3 #total sugar shake time 3
boxplot(fbox$t0_ss900)
!is.na(fbox$t0_ss900-fbox$t1_ss900)->include #escluse casse con valori NA
fbox$t0_ss900<11 & include ->include #escluse casse con altissima infestazione
fboxi<-fbox[include,] #dataset delle casse in analisi
rm(include)
detach()
rm(list=ls())
# data load ---------------------------------------------------------------
fbox <- read.csv("./data/fbox_def.csv", sep=",")
fbox$t0_treat<-c(rep("fb",48),rep("nt",48))   #treatments: fbox, no treatment
# 900 bees sums -----------------------------------------------------------
fbox$t0_ss900<- fbox$t0_ss300_1 + fbox$t0_ss300_2 + fbox$t0_ss300_3 #total sugar shake time 0
fbox$t1_ss900<- fbox$t1_ss300_1 + fbox$t1_ss300_2 + fbox$t1_ss300_3 #total sugar shake time 1
fbox$t2_ss900<- fbox$t2_ss300_1 + fbox$t2_ss300_2 + fbox$t2_ss300_3 #total sugar shake time 2
fbox$t3_ss900<- fbox$t3_ss300_1 + fbox$t3_ss300_2 + fbox$t3_ss300_3 #total sugar shake time 3
############inserire sezione
!is.na(fbox$t0_ss900-fbox$t1_ss900)->include # NAs removed (only time 0 and 1)
fbox$t0_ss900<11 & include ->include #excluded most infested hives
fboxi<-fbox[include,] #dataset delle casse in analisi
rm(include)
n_nt<-length(ss9_bt[tratt=="nt"]) # num ctr hives
dim(fboxi)
dim(fboxi)[1]
dim(fboxi[t0_treat=="nt"])[1]
dim(fboxi[fboxi$t0_treat=="nt",])[1]
dim(fboxi[fboxi$t0_treat=="fb",])[1]
n_nt<-dim(fboxi[fboxi$t0_treat=="nt",])[1] # num ctr hives
n_fb<-dim(fboxi[fboxi$t0_treat=="fb",])[1]    # num fbox hives
fbox$t0_ss900<2
sum(fbox$t0_ss900<2)
sum(fboxi$t0_ss900<2)
sum(fboxi$t0_ss900<1)
sum(fboxi$t0_ss900>1)
sum(fboxi$t0_ss900>0)
fbox$t0_ss900<11 & fbox$t0_ss900>0 & include ->include #excluded most infested hives and hives with infestation under 1/900
!is.na(fbox$t0_ss900-fbox$t1_ss900)->include # NAs removed (only time 0 and 1)
fbox$t0_ss900<11 & fbox$t0_ss900>0 & include ->include #excluded most infested hives and hives with infestation under 1/900
sum(include)
View(fboxi)
boxplot(fboxi$t1_growth~fboxi$t0_treat)
fboxi$t1_growth<-fboxi$t1_ss900/fboxi$t0_ss900
#boxplot(eff_log~tratt)
boxplot(fboxi$t1_growth~fboxi$t0_treat)
n_nt<-dim(fboxi[fboxi$t0_treat=="nt",])[1] # num ctr hives
n_fb<-dim(fboxi[fboxi$t0_treat=="fb",])[1]    # num fbox hives
n_nt
n_fb
!is.na(fbox$t0_ss900-fbox$t1_ss900)->include # NAs removed (only time 0 and 1)
fbox$t0_ss900<11 & fbox$t0_ss900>0 & include ->include #excluded most infested hives and hives with infestation under 1/900
fboxi<-fbox[include,] #dataset delle casse in analisi
rm(include)
#fboxi<-fboxi[order(fboxi$ss9_bt),] ????? inutile ?????
n_nt<-dim(fboxi[fboxi$t0_treat=="nt",])[1] # num ctr hives
n_fb<-dim(fboxi[fboxi$t0_treat=="fb",])[1]    # num fbox hives
n_nt
n_fb
fboxi$t1_growth<-(fboxi$t1_ss900-fboxi$t0_ss900)/fboxi$t0_ss900
#boxplot(eff_log~tratt)
boxplot(fboxi$t1_growth~fboxi$t0_treat)
fboxi$t1_growth<-(fboxi$t1_ss900-fboxi$t0_ss900)/fboxi$t0_ss900*100
#boxplot(eff_log~tratt)
boxplot(fboxi$t1_growth~fboxi$t0_treat)
fboxi_nt<-fboxi[fboxi$t0_treat=="nt",]
fboxi_fb<-fboxi[fboxi$t0_treat=="fb",]
plot(fboxi_nt$t0_ss900,fboxi_nt$t1_ss900)
abline(fboxi_nt$t0_ss900,fboxi_nt$t1_ss900)
lm(t1_ss900~t0_ss900,data=fboxi_nt)
points(fboxi_fb$t0_ss900,fboxi_fb$t1_ss900,pch=3)
abline(fboxi_fb$t0_ss900,fboxi_fb$t1_ss900)
lm(t1_ss900~t0_ss900,data=fboxi_fb)
line(lm(t1_ss900~t0_ss900,data=fboxi_fb))
plot(lm(t1_ss900~t0_ss900,data=fboxi_fb),add=T)
ht.efficacy<-function(ta,tb,cb,ca){100*(1-(ta*cb)/(tb*ca))}
ht.efficacy<-function(tb,ta,cb,ca){100*(1-(ta*mean(cb))/(tb*mean(ca))}
ht.efficacy<-function(tb,ta,cb,ca){100*(1-(ta*mean(cb)/(tb*mean(ca)))}
ht.efficacy<-function(tb,ta,cb,ca){100*(1-((ta*mean(cb))/(tb*mean(ca)))}
ht.efficacy<-function(tb,ta,cb,ca){100*(1-((ta*mean(cb))/(tb*mean(ca))))}
ht.efficacy(fboxi_fb$t0_ss900,fboxi_fb$t1_ss900,fboxi_nt$t0_ss900,fboxi_nt$t1_ss900)
fboxi$t1_ht.eff<-ht.efficacy(fboxi_fb$t0_ss900,fboxi_fb$t1_ss900,fboxi_nt$t0_ss900,fboxi_nt$t1_ss900)
fboxi_fb$t1_ht.eff<-ht.efficacy(fboxi_fb$t0_ss900,fboxi_fb$t1_ss900,fboxi_nt$t0_ss900,fboxi_nt$t1_ss900)
mean(fboxi_fb)
fboxi_nt$t1_ss900
fboxi_nt$t1_ss900/9
# hives selection -------------------------------------------------------
!is.na(fbox$t0_ss900-fbox$t1_ss900)->include # NAs removed (only time 0 and 1)
fbox$t0_ss900<11 & fbox$t0_ss900>1 & include ->include #excluded most infested hives and hives with infestation under 1/900
fboxi<-fbox[include,] #dataset delle casse in analisi
rm(include)
#fboxi<-fboxi[order(fboxi$ss9_bt),] ????? inutile ?????
n_nt<-dim(fboxi[fboxi$t0_treat=="nt",])[1] # num ctr hives
n_fb<-dim(fboxi[fboxi$t0_treat=="fb",])[1]    # num fbox hives
# t1-t0 growth analysis ---------------------------------------------------
#fboxi$eff_log<-log(ss9_at+0.5)-log(ss9_bt+0.5)
fboxi$t1_growth<-(fboxi$t1_ss900-fboxi$t0_ss900)/fboxi$t0_ss900*100
#boxplot(eff_log~tratt)
boxplot(fboxi$t1_growth~fboxi$t0_treat)
fboxi_nt<-fboxi[fboxi$t0_treat=="nt",]
fboxi_fb<-fboxi[fboxi$t0_treat=="fb",]
plot(fboxi_nt$t0_ss900,fboxi_nt$t1_ss900)
abline(fboxi_nt$t0_ss900,fboxi_nt$t1_ss900)
lm(t1_ss900~t0_ss900,data=fboxi_nt)
#plot(glm(ss9_at~sqrt(ss9_bt),family=poisson))
points(fboxi_fb$t0_ss900,fboxi_fb$t1_ss900,pch=3)
abline(fboxi_fb$t0_ss900,fboxi_fb$t1_ss900)
### henderson_tilton
ht.efficacy<-function(tb,ta,cb,ca){100*(1-((ta*mean(cb))/(tb*mean(ca))))}
fboxi_fb$t1_ht.eff<-ht.efficacy(fboxi_fb$t0_ss900,fboxi_fb$t1_ss900,fboxi_nt$t0_ss900,fboxi_nt$t1_ss900)
mean(fboxi_fb)
n_fb
n_nt
fboxi_fb$t1_ht.eff
plot(fboxi_fb$t0_ss900,fboxi_fb$t1_ht.eff)
abline(fboxi_fb$t0_ss900,fboxi_fb$t1_ht.eff)
getwd()
?Sweave
efficacia_zucchero <- read.csv("~/Documenti/importanza_1_sync/unaapi/Sperimentazioni/Formicobox/data/efficacia_zucchero.csv")
View(efficacia_zucchero)
rm(efficacia_zucchero)
sug_alc <- read.csv("~/Documenti/importanza_1_sync/unaapi/Sperimentazioni/Formicobox/data/efficacia_zucchero.csv")
View(efficacia_zucchero)
sug_alc <- read.csv("~/Documenti/importanza_1_sync/unaapi/Sperimentazioni/Formicobox/data/efficacia_zucchero.csv")
str(sug_alc)
mean(n_am)
mean(sug_alc$n_am)
mean(sug_alc$n_am,na.rm=T)
sd(sug_alc$n_am,na.rm=T)
sug_alc <- read.csv("./data/efficacia_zucchero.csv")
mean(sug_alc$n_am,na.rm=T)
boxplot(sug_alc$n_am)
?plot
boxplot(sug_alc$n_am,ylim=c(0,500))
sug_alc$n_vd_sug+sug_alc$n_vd_alc
sug_alc$n_vd_alc/(sug_alc$n_vd_sug+sug_alc$n_vd_alc)
sug_alc$n_vd_sug/(sug_alc$n_vd_sug+sug_alc$n_vd_alc)
sug_als$sug_eff<-sug_alc$n_vd_sug/(sug_alc$n_vd_sug+sug_alc$n_vd_alc)
sug_alc$sug_eff<-sug_alc$n_vd_sug/(sug_alc$n_vd_sug+sug_alc$n_vd_alc)
boxplot(sug_alc$sug_eff)
boxplot(sug_alc$sug_eff*100,ylim=c(0,100))
mean(sug_alc$sug_eff*100)
mean(sug_alc$sug_eff*100,na.rm=T)
sd(sug_alc$sug_eff*100,na.rm=T)
boxplot(sug_alc$sug_eff*100~sug_alc$id_op_alc,ylim=c(0,100))
313*59
?with
source("analisi_formicobox.R")
