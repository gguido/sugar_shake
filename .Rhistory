#numero medio di api post blocco api/campione varroe/api/campione
100/linear_model$coefficients
#idem senza 76 e 77
#correlazione zucchero a t2-cadute in blocco nel controllo
fbox_blocco_m->fbox_blocco_m_old
fbox_blocco_m[-c(6,7),]->fbox_blocco_m
#correlazione zucchero a t2-cadute in blocco nel controllo
plot(apply(fbox_blocco_m[,10:12],1,sum),fbox_blocco_m$t2_ss900/9,ylab="zucchero %",xlab="cadute",main="correlazione zucchero t2-cadute in blocco ctr")
#pearson
cor(fbox_blocco_m$t2_ss900/9, apply(fbox_blocco_m[,10:12],1,sum))
#regressione per origine
lm(fbox_blocco_m$t2_ss900/9~0+apply(fbox_blocco_m[,10:12],1,sum))->linear_model
abline(linear_model)
summary(linear_model)
#numero medio di api post blocco api/campione varroe/api/campione
100/linear_model$coefficients
#ripristino dati
fbox_blocco <- read.csv("../data/formicobox_blocco_conteggi.csv", sep=";", dec=",")
merge(fbox_blocco[-c(10,14:23)],fbox,by="id_hive",all.x=T)->fbox_blocco_m #togliere 76 e 77???? [-(6:7),]
rm(fbox_blocco_m_old)
apply(fbox_blocco_m[,3:9],1,sum) /  apply(fbox_blocco_m[,3:12],1,sum)
eff.class<-apply(fbox_blocco_m[,3:9],1,sum) /  apply(fbox_blocco_m[,3:12],1,sum)
apply(fbox_blocco_m[,3:9],1,sum) /  apply(fbox_blocco_m[,3:12],1,sum)
eff.class[which(fbox_blocco_m$tratt=="fbox")]->eff.cad
rm(eff.class)
plot(eff.cad,ht.sug)
# henderson tilton su zucchero
fbox_blocco_m$t1_ss900[which(fbox_blocco_m$tratt=="fbox")]->tb
fbox_blocco_m$t2_ss900[which(fbox_blocco_m$tratt=="fbox")]->ta
fbox_blocco_m$t1_ss900[which(fbox_blocco_m$tratt=="ctr")]->cb
fbox_blocco_m$t2_ss900[which(fbox_blocco_m$tratt=="ctr")]->ca
ht.efficacy(tb,ta,cb,ca)
ht.efficacy(tb,ta,cb,ca)->ht.sug
mean(ht.efficacy(tb,ta,cb,ca))
boxplot(ht.efficacy(tb,ta,cb,ca))
boxplot(eff.cad,ht.sug)
eff.class<-100*apply(fbox_blocco_m[,3:9],1,sum) /  apply(fbox_blocco_m[,3:12],1,sum)
eff.class[which(fbox_blocco_m$tratt=="fbox")]->eff.cad
rm(eff.class)
boxplot(eff.cad,ht.sug)
boxplot(eff.cad,ht.sug,names=c("cadute","zucchero""))
#confronto con zucchero
boxplot(eff.cad,ht.sug,names=c("cadute","zucchero""))
boxplot(eff.cad,ht.sug,names=c("cadute","zucchero"))
boxplot(eff.cad,ht.sug,names=c("cadute","zucchero")) #aggiungere media a qs boxplot
mean(eff.cad)
mean(ht.sug)
plot(eff.cad,ht.sug)
abs(eff.cad*100-ht.sug)
cbind(eff.cad,ht.sug)
abs(eff.cad-ht.sug)
plot(abs(eff.cad*100-ht.sug),apply(fbox_blocco_m[,3:12],1,sum)[which(fbox_blocco_m$tratt=="fbox")])
plot(abs(eff.cas-ht.sug),apply(fbox_blocco_m[,3:12],1,sum)[which(fbox_blocco_m$tratt=="fbox")])
plot(abs(eff.cad-ht.sug),apply(fbox_blocco_m[,3:12],1,sum)[which(fbox_blocco_m$tratt=="fbox")])
plot(abs(eff.cad-ht.sug),apply(fbox_blocco_m[,3:12],1,sum)[which(fbox_blocco_m$tratt=="fbox")])
plot(abs(eff.cad-ht.sug),apply(fbox_blocco_m[,3:12],1,sum)[which(fbox_blocco_m$tratt=="fbox")])
#calcolo efficacia metodo classico delle cadute.
eff.class<-100*apply(fbox_blocco_m[,3:9],1,sum) /  apply(fbox_blocco_m[,3:12],1,sum)
eff.class[which(fbox_blocco_m$tratt=="fbox")]->eff.cad
rm(eff.class)
#confronto con zucchero
boxplot(eff.cad,ht.sug,names=c("cadute","zucchero")) #aggiungere media a qs boxplot
mean(eff.cad)
mean(ht.sug)
plot(eff.cad,ht.sug)
cbind(eff.cad,ht.sug)
abs(eff.cad-ht.sug)
plot(abs(eff.cad-ht.sug),apply(fbox_blocco_m[,3:12],1,sum)[which(fbox_blocco_m$tratt=="fbox")])
plot(apply(fbox_blocco_m[,3:12],1,sum)[which(fbox_blocco_m$tratt=="fbox")],abs(eff.cad-ht.sug))
plot(apply(fbox_blocco_m[,3:12],1,sum)[which(fbox_blocco_m$tratt=="fbox")],abs(eff.cad-ht.sug),xlab="totale cadute",ylab="differenza di efficacia con i due metodi")
abs(eff.cad-ht.sug)->diff.eff
apply(fbox_blocco_m[,3:12],1,sum)[which(fbox_blocco_m$tratt=="fbox")]->tot_cad_fbox
plot(tot_cad_fbox,diff.eff,xlab="totale cadute",ylab="differenza di efficacia con i due metodi")
curve(sqrt(x)/x,0,10)
View(fbox)
mean(c(eff.cad,ht.sug)
mean(c(eff.cad,ht.sug))
mean(c(eff.cad,ht.sug))
mean(c(eff.cad,ht.sug))->mean.values
points(seq(rb$n), mean.value, pch = 17)
rb<-boxplot(eff.cad,ht.sug,names=c("cadute","zucchero")) #aggiungere media a qs boxplot
mean(c(eff.cad,ht.sug))->mean.values
points(seq(rb$n), mean.value, pch = 17)
mean(eff.cad)
rb<-boxplot(eff.cad,ht.sug,names=c("cadute","zucchero")) #aggiungere media a qs boxplot
mean(c(eff.cad,ht.sug))->mean.values
points(seq(rb$n), mean.values, pch = 17)
seq(rb$n)
mean.values
mean(cbind(eff.cad,ht.sug))->mean.values
points(seq(rb$n), mean.values, pch = 17)
c(mean(eff.cad),mean(ht.sug))->mean.values
points(seq(rb$n), mean.values, pch = 17)
View(fboxi)
View(fbox)
fbox$id_hive[which(fbox$t0_treat=="nt")]
names(fbox_blocco)
intersect(fbox$id_hive[which(fbox$t0_treat=="nt")],fboX_blocco$id_hive)
intersect(fbox$id_hive[which(fbox$t0_treat=="nt")],fboX_blocco$id_hive)
intersect(fbox$id_hive[which(fbox$t0_treat=="nt")],fboX_blocco$id_hive)
intersect(fbox$id_hive[which(fbox$t0_treat=="nt")],fbox_blocco$id_hive)
setdiff(fbox$id_hive[which(fbox$t0_treat=="nt")],fbox_blocco$id_hive)
length(setdiff(fbox$id_hive[which(fbox$t0_treat=="nt")],fbox_blocco$id_hive))
setdiff(fbox$id_hive[which(fbox$t0_treat=="nt")],fbox_blocco$id_hive)
plot(apply(fbox_blocco_m[,10:12],1,sum),fbox_blocco_m$t2_ss900/9,ylab="zucchero %",xlab="cadute",main="correlazione zucchero t2-cadute in blocco ctr")
#pearson
cor(fbox_blocco_m$t2_ss900/9, apply(fbox_blocco_m[,10:12],1,sum))
#regressione per origine
lm(fbox_blocco_m$t2_ss900/9~0+apply(fbox_blocco_m[,10:12],1,sum))->linear_model
abline(linear_model)
summary(linear_model)
#numero medio di api post blocco api/campione varroe/api/campione
100/linear_model$coefficients
#idem senza 76 e 77
fbox_blocco_m->fbox_blocco_m_old
fbox_blocco_m[-c(6,7),]->fbox_blocco_m
#correlazione zucchero a t2-cadute in blocco nel controllo
plot(apply(fbox_blocco_m[,10:12],1,sum),fbox_blocco_m$t2_ss900/9,ylab="zucchero %",xlab="cadute",main="correlazione zucchero t2-cadute in blocco ctr")
#pearson
cor(fbox_blocco_m$t2_ss900/9, apply(fbox_blocco_m[,10:12],1,sum))
#regressione per origine
lm(fbox_blocco_m$t2_ss900/9~0+apply(fbox_blocco_m[,10:12],1,sum))->linear_model
abline(linear_model)
summary(linear_model)
#numero medio di api post blocco api/campione varroe/api/campione
100/linear_model$coefficients
# henderson tilton su zucchero
fbox_blocco_m$t1_ss900[which(fbox_blocco_m$tratt=="fbox")]->tb
fbox_blocco_m$t2_ss900[which(fbox_blocco_m$tratt=="fbox")]->ta
fbox_blocco_m$t1_ss900[which(fbox_blocco_m$tratt=="ctr")]->cb
fbox_blocco_m$t2_ss900[which(fbox_blocco_m$tratt=="ctr")]->ca
ht.efficacy(tb,ta,cb,ca)
ht.efficacy(tb,ta,cb,ca)->ht.sug
mean(ht.efficacy(tb,ta,cb,ca))
boxplot(ht.efficacy(tb,ta,cb,ca))
#correlazione zucchero a t2-cadute in blocco nel controllo
plot(apply(fbox_blocco_m[,10:12],1,sum),fbox_blocco_m$t2_ss900/9,ylab="zucchero %",xlab="cadute",main="correlazione zucchero t2-cadute in blocco ctr")
#pearson
cor(fbox_blocco_m$t2_ss900/9, apply(fbox_blocco_m[,10:12],1,sum))
#regressione per origine
lm(fbox_blocco_m$t2_ss900/9~0+apply(fbox_blocco_m[,10:12],1,sum))->linear_model
abline(linear_model)
summary(linear_model)
#numero medio di api post blocco api/campione varroe/api/campione
100/linear_model$coefficients
#idem senza 76 e 77
fbox_blocco_m->fbox_blocco_m_old
fbox_blocco_m[-c(6,7),]->fbox_blocco_m
#correlazione zucchero a t2-cadute in blocco nel controllo
plot(apply(fbox_blocco_m[,10:12],1,sum),fbox_blocco_m$t2_ss900/9,ylab="zucchero %",xlab="cadute",main="correlazione zucchero t2-cadute in blocco ctr")
#pearson
fbox_blocco_m$t1_ss900
apply(fbox_blocco_m[,10:12],1,sum
)
apply(fbox_blocco_m[,3:12],1,sum)
View(fbox_blocco_m)
cbind(names(fbox_blocco_m))
setdiff(fbox$id_hive[which(fbox$t0_treat=="nt")],fbox_blocco$id_hive)->fbox_t2
setdiff(fbox$id_hive[which(fbox$t0_treat=="nt")],fbox_blocco$id_hive)->fbox_t2_id
?setdiff
#correlazione zucchero a t2-cadute in blocco nel controllo
plot(apply(fbox_blocco_m[,10:12],1,sum),fbox_blocco_m$t2_ss900/9,ylab="zucchero %",xlab="cadute",main="correlazione zucchero t2-cadute in blocco ctr")
fbox_blocco <- read.csv("../data/formicobox_blocco_conteggi.csv", sep=";", dec=",")
merge(fbox_blocco[-c(10,14:23)],fbox,by="id_hive",all.x=T)->fbox_blocco_m #togliere 76 e 77???? [-(6:7),]
rm(fbox_blocco_m_old)
#correlazione zucchero a t2-cadute in blocco nel controllo
plot(apply(fbox_blocco_m[,10:12],1,sum),fbox_blocco_m$t2_ss900/9,ylab="zucchero %",xlab="cadute",main="correlazione zucchero t2-cadute in blocco ctr")
#pearson
cor(fbox_blocco_m$t2_ss900/9, apply(fbox_blocco_m[,10:12],1,sum))
#regressione per origine
lm(fbox_blocco_m$t2_ss900/9~0+apply(fbox_blocco_m[,10:12],1,sum))->linear_model
abline(linear_model)
summary(linear_model)
apply(fbox_blocco_m[,10:12],1,sum)
fbox_blocco_m$t2_ss900/9
#regressione per origine
lm(fbox_blocco_m$t2_ss900/9~0+apply(fbox_blocco_m[,10:12],1,sum))->linear_model
abline(linear_model)
summary(linear_model)
100/linear_model$coefficients
fbox_blocco_m->fbox_blocco_m_old
fbox_blocco_m[-c(6,7),]->fbox_blocco_m
#correlazione zucchero a t2-cadute in blocco nel controllo
plot(apply(fbox_blocco_m[,10:12],1,sum),fbox_blocco_m$t2_ss900/9,ylab="zucchero %",xlab="cadute",main="correlazione zucchero t2-cadute in blocco ctr")
#pearson
cor(fbox_blocco_m$t2_ss900/9, apply(fbox_blocco_m[,10:12],1,sum))
#regressione per origine
lm(fbox_blocco_m$t2_ss900/9~0+apply(fbox_blocco_m[,10:12],1,sum))->linear_model
abline(linear_model)
summary(linear_model)
#numero medio di api post blocco api/campione varroe/api/campione
100/linear_model$coefficients
#ripristino dati
fbox_blocco <- read.csv("../data/formicobox_blocco_conteggi.csv", sep=";", dec=",")
merge(fbox_blocco[-c(10,14:23)],fbox,by="id_hive",all.x=T)->fbox_blocco_m #togliere 76 e 77???? [-(6:7),]
rm(fbox_blocco_m_old)
#fare stessa correlazione tra totale cadute e zucchero a t1
#distinguendo tra trattati e non trattati
#perché in trattati si è intoerrotta la riproduzione
#calcolo efficacia metodo classico delle cadute.
eff.class<-100*apply(fbox_blocco_m[,3:9],1,sum) /  apply(fbox_blocco_m[,3:12],1,sum)
eff.class[which(fbox_blocco_m$tratt=="fbox")]->eff.cad
rm(eff.class)
#confronto con zucchero
rb<-boxplot(eff.cad,ht.sug,names=c("cadute","zucchero"))
c(mean(eff.cad),mean(ht.sug))->mean.values
points(seq(rb$n), mean.values, pch = 17) #aggiunte medie a boxplot
mean(eff.cad)
mean(ht.sug)
plot(eff.cad,ht.sug)
fbox_blocco <- read.csv("../data/formicobox_blocco_conteggi.csv", sep=";", dec=",")
merge(fbox_blocco[-c(10,14:23)],fbox,by="id_hive",all.x=T)->fbox_blocco_m #togliere 76 e 77???? [-(6:7),]
rm(fbox_blocco_m_old)
plot(apply(fbox_blocco_m[,10:12],1,sum),fbox_blocco_m$t2_ss900/9,ylab="zucchero %",xlab="cadute",main="correlazione zucchero t2-cadute in blocco ctr")
#pearson
cor(fbox_blocco_m$t2_ss900/9, apply(fbox_blocco_m[,10:12],1,sum))
#regressione per origine
lm(fbox_blocco_m$t2_ss900/9~0+apply(fbox_blocco_m[,10:12],1,sum))->linear_model
abline(linear_model)
summary(linear_model)
#numero medio di api post blocco api/campione varroe/api/campione
100/linear_model$coefficients
#numero medio di api post blocco api/campione varroe/api/campione
100/linear_model$coefficients
#idem senza 76 e 77
fbox_blocco_m->fbox_blocco_m_old
fbox_blocco_m[-c(6,7),]->fbox_blocco_m
#correlazione zucchero a t2-cadute in blocco nel controllo
plot(apply(fbox_blocco_m[,10:12],1,sum),fbox_blocco_m$t2_ss900/9,ylab="zucchero %",xlab="cadute",main="correlazione zucchero t2-cadute in blocco ctr")
#pearson
cor(fbox_blocco_m$t2_ss900/9, apply(fbox_blocco_m[,10:12],1,sum))
#regressione per origine
lm(fbox_blocco_m$t2_ss900/9~0+apply(fbox_blocco_m[,10:12],1,sum))->linear_model
abline(linear_model)
summary(linear_model)
#numero medio di api post blocco api/campione varroe/api/campione
100/linear_model$coefficients
#ripristino dati
fbox_blocco <- read.csv("../data/formicobox_blocco_conteggi.csv", sep=";", dec=",")
merge(fbox_blocco[-c(10,14:23)],fbox,by="id_hive",all.x=T)->fbox_blocco_m #togliere 76 e 77???? [-(6:7),]
rm(fbox_blocco_m_old)
curve(sqrt(x)/x,0,10)
View(fbox_blocco_m)
apply(fbox_blocco_m[,10:12],1,sum)
apply(fbox_blocco_m[,10:12],1,sum)
apply(fbox_blocco_m[,3:12],1,sum)
sum(apply(fbox_blocco_m[,3:12],1,sum)<300)
length(apply(fbox_blocco_m[,3:12],1,sum)<300)
length(apply(fbox_blocco_m[,3:12],1,sum)<200)
sum(apply(fbox_blocco_m[,3:12],1,sum)<200)
sum(apply(fbox_blocco_m[,3:12],1,sum)<150)
(apply(fbox_blocco_m[,3:12],1,sum)<150)
which(apply(fbox_blocco_m[,3:12],1,sum)<150)
which(apply(fbox_blocco_m[,3:12],1,sum)<150)->togliere
eff.class<-100*apply(fbox_blocco_m[,3:9],1,sum) /  apply(fbox_blocco_m[,3:12],1,sum)
eff.class[togliere]->eff.class
eff.class[which(fbox_blocco_m$tratt=="fbox")]->eff.cad
rm(eff.class)
rb<-boxplot(eff.cad,ht.sug,names=c("cadute","zucchero"))
c(mean(eff.cad),mean(ht.sug))->mean.values
eff.cad
eff.class<-100*apply(fbox_blocco_m[,3:9],1,sum) / apply(fbox_blocco_m[,3:12],1,sum)
eff.class
togliere
fbox_blocco_m[which( apply(fbox_blocco_m[,3:12],1,sum)>300),]
fbox_blocco_m[which( apply(fbox_blocco_m[,3:12],1,sum)>200),]
as.Date(c("2012/7/15","2012/07/18","2012/7/22","2012/07/26","2012/7/30","2012/08/3","2012/08/7","2012/08/8","2012/08/10","2012/08/13"))->Dates.cad
fbox_blocco_m[fbox_blocco_m$tratt=="ctr",c(3:12)]->cadute_ctr
fbox_blocco_m[fbox_blocco_m$tratt=="fbox",c(3:12)]->cadute_fbox
dim(cadute_ctr)[1]->num_ctr #numero di alveari nell'esperimento
dim(cadute_fbox)[1]->num_fbox
plot(Dates.cad,apply(cadute_fbox,2,mean),type="l") #andamento medio caduta
plot(Dates.cad,apply(cadute_ctr,2,mean),type="l")
#plot(apply(fbox_blocco_m[,c(3:12)],1,sum),fbox_blocco_m$)
#boxplot cadute
boxplot(cadute_ctr,names=(Dates.cad-as.Date("2012/07/12")),xlab="giorni dal trattamento",ylab="acari caduti")
lines(x=c(7.5,7.5),y=c(0,max(cadute_ctr)),lwd=3,col="red")
text(7.5,max(cadute_ctr),"trattamento di controllo",adj=1,col="red")
boxplot(cadute_fbox,names=(Dates.cad-as.Date("2012/07/12")))
lines(x=c(7.5,7.5),y=c(0,max(cadute_fbox)),lwd=3,col="red")
text(7.5,max(cadute_fbox),"trattamento di controllo",adj=1,col="red")
boxplot(cadute_fbox[1:7],add=F,col="red",names=(Dates.cad-as.Date("2012/07/12"))[1:7]) #confronto efficacia sotto opercolo
# #tb ta cb ca
# #ht.efficacy()
# apply(fbox_blocco_m[which(fbox_blocco_m$tratt=="fbox"),3:9],1,sum)->tb
# apply(fbox_blocco_m[which(fbox_blocco_m$tratt=="fbox"),10:12],1,sum)->ta
# apply(fbox_blocco_m[which(fbox_blocco_m$tratt=="ctr"),3:9],1,sum)->cb
# apply(fbox_blocco_m[which(fbox_blocco_m$tratt=="ctr"),10:12],1,sum)->ca
# ht.efficacy(tb,ta,cb,ca)
# ht.efficacy(tb,ta,cb,ca)->ht.cad
# mean(ht.efficacy(tb,ta,cb,ca))
# boxplot(ht.efficacy(tb,ta,cb,ca))
# henderson tilton su zucchero
fbox_blocco_m$t1_ss900[which(fbox_blocco_m$tratt=="fbox")]->tb
fbox_blocco_m$t2_ss900[which(fbox_blocco_m$tratt=="fbox")]->ta
fbox_blocco_m$t1_ss900[which(fbox_blocco_m$tratt=="ctr")]->cb
fbox_blocco_m$t2_ss900[which(fbox_blocco_m$tratt=="ctr")]->ca
ht.efficacy(tb,ta,cb,ca)
ht.efficacy(tb,ta,cb,ca)->ht.sug
mean(ht.efficacy(tb,ta,cb,ca))
fbox_blocco_m
fbox_blocco <- read.csv("../data/formicobox_blocco_conteggi.csv", sep=";", dec=",")
merge(fbox_blocco[-c(10,14:23)],fbox,by="id_hive",all.x=T)->fbox_blocco_m #togliere 76 e 77???? [-(6:7),]
fbox_blocco_m[which( apply(fbox_blocco_m[,3:12],1,sum)>200),]
fbox_blocco_m[which( apply(fbox_blocco_m[,3:12],1,sum)>200),]->fbox_blocco_m
as.Date(c("2012/7/15","2012/07/18","2012/7/22","2012/07/26","2012/7/30","2012/08/3","2012/08/7","2012/08/8","2012/08/10","2012/08/13"))->Dates.cad
fbox_blocco_m[fbox_blocco_m$tratt=="ctr",c(3:12)]->cadute_ctr
fbox_blocco_m[fbox_blocco_m$tratt=="fbox",c(3:12)]->cadute_fbox
dim(cadute_ctr)[1]->num_ctr #numero di alveari nell'esperimento
dim(cadute_fbox)[1]->num_fbox
plot(Dates.cad,apply(cadute_fbox,2,mean),type="l") #andamento medio caduta
plot(Dates.cad,apply(cadute_ctr,2,mean),type="l")
#plot(apply(fbox_blocco_m[,c(3:12)],1,sum),fbox_blocco_m$)
#boxplot cadute, usare caduta giornaliera e non dati assoluti (3 e 4 giorni)
boxplot(cadute_ctr,names=(Dates.cad-as.Date("2012/07/12")),xlab="giorni dal trattamento",ylab="acari caduti")
lines(x=c(7.5,7.5),y=c(0,max(cadute_ctr)),lwd=3,col="red")
text(7.5,max(cadute_ctr),"trattamento di controllo",adj=1,col="red")
boxplot(cadute_fbox,names=(Dates.cad-as.Date("2012/07/12")))
lines(x=c(7.5,7.5),y=c(0,max(cadute_fbox)),lwd=3,col="red")
text(7.5,max(cadute_fbox),"trattamento di controllo",adj=1,col="red")
boxplot(cadute_fbox[1:7],add=F,col="red",names=(Dates.cad-as.Date("2012/07/12"))[1:7]) #confronto efficacia sotto opercolo
# #tb ta cb ca
# #ht.efficacy()
# apply(fbox_blocco_m[which(fbox_blocco_m$tratt=="fbox"),3:9],1,sum)->tb
# apply(fbox_blocco_m[which(fbox_blocco_m$tratt=="fbox"),10:12],1,sum)->ta
# apply(fbox_blocco_m[which(fbox_blocco_m$tratt=="ctr"),3:9],1,sum)->cb
# apply(fbox_blocco_m[which(fbox_blocco_m$tratt=="ctr"),10:12],1,sum)->ca
# ht.efficacy(tb,ta,cb,ca)
# ht.efficacy(tb,ta,cb,ca)->ht.cad
# mean(ht.efficacy(tb,ta,cb,ca))
# boxplot(ht.efficacy(tb,ta,cb,ca))
# henderson tilton su zucchero
fbox_blocco_m$t1_ss900[which(fbox_blocco_m$tratt=="fbox")]->tb
fbox_blocco_m$t2_ss900[which(fbox_blocco_m$tratt=="fbox")]->ta
fbox_blocco_m$t1_ss900[which(fbox_blocco_m$tratt=="ctr")]->cb
fbox_blocco_m$t2_ss900[which(fbox_blocco_m$tratt=="ctr")]->ca
ht.efficacy(tb,ta,cb,ca)
ht.efficacy(tb,ta,cb,ca)->ht.sug
mean(ht.efficacy(tb,ta,cb,ca))
boxplot(ht.efficacy(tb,ta,cb,ca))
#correlazione zucchero a t2-cadute in blocco nel controllo
plot(apply(fbox_blocco_m[,10:12],1,sum),fbox_blocco_m$t2_ss900/9,ylab="zucchero %",xlab="cadute",main="correlazione zucchero t2-cadute in blocco ctr")
#pearson
cor(fbox_blocco_m$t2_ss900/9, apply(fbox_blocco_m[,10:12],1,sum))
#regressione per origine
lm(fbox_blocco_m$t2_ss900/9~0+apply(fbox_blocco_m[,10:12],1,sum))->linear_model
abline(linear_model)
summary(linear_model)
#numero medio di api post blocco api/campione varroe/api/campione
100/linear_model$coefficients
#calcolo efficacia metodo classico delle cadute.
eff.class<-100*apply(fbox_blocco_m[,3:9],1,sum) /  apply(fbox_blocco_m[,3:12],1,sum)
eff.class[which(fbox_blocco_m$tratt=="fbox")]->eff.cad
rm(eff.class)
#confronto con zucchero
rb<-boxplot(eff.cad,ht.sug,names=c("cadute","zucchero"))
c(mean(eff.cad),mean(ht.sug))->mean.values
points(seq(rb$n), mean.values, pch = 17) #aggiunte medie a boxplot
mean(eff.cad)
mean(ht.sug)
plot(eff.cad,ht.sug)
rb<-boxplot(eff.cad,ht.sug,names=c("cadute","zucchero"))
c(mean(eff.cad),mean(ht.sug))->mean.values
points(seq(rb$n), mean.values, pch = 17) #aggiunte medie a boxplot
mean(eff.cad)
setdiff(fbox$id_hive[which(fbox$t0_treat=="nt")],fbox_blocco$id_hive)->fbox_t2_id
dim(fbox_t2_id)
setdiff(fbox$id_hive[which(fbox$t0_treat=="nt")],fbox_blocco$id_hive)->fbox_t2_id
setdiff(fbox$id_hive[which(fbox$t0_treat=="nt")],fbox_blocco$id_hive)->fbox_t2_id
dim(fbox_t2_id)
setdiff(fbox$id_hive[which(fbox$t0_treat=="nt"),],fbox_blocco$id_hive)->fbox_t2_id
setdiff(fbox$id_hive[which(fbox$t0_treat=="nt")],fbox_blocco$id_hive)->fbox_t2_id
fbox_t2_id
setdiff(fbox$id_hive[which(fbox$t0_treat=="nt")],fbox_blocco_m$id_hive)->fbox_t2_id
fbox_t2_id
setdiff(fbox$id_hive[which(fbox$t0_treat=="nt")],fbox_blocco_m$id_hive)->fbox_t2_id
fbox_t2_id
fbox_blocco <- read.csv("../data/formicobox_blocco_conteggi.csv", sep=";", dec=",")
merge(fbox_blocco[-c(10,14:23)],fbox,by="id_hive",all.x=T)->fbox_blocco_m #togliere 76 e 77???? [-(6:7),]
setdiff(fbox$id_hive[which(fbox$t0_treat=="nt")],fbox_blocco_m$id_hive)->fbox_t2_id
fbox_t2_id
length(fbox_t2_id)
View(fbox)
fbox$t1_ss900+fbox$t2_ss900
!is.na(fbox$t1_ss900+fbox$t2_ss900)
setdiff(fbox$id_hive[which(fbox$t0_treat=="nt")],fbox_blocco_m$id_hive)->fbox_t2_id
fbox_t2_id
setdiff(fbox$id_hive[which(fbox$t0_treat=="nt")],fbox_blocco_m$id_hive)->fbox_t2_id
setdiff(fbox$id_hive[which(fbox$t0_treat=="nt")],fbox_blocco_m$id_hive)->fbox_t2_id
!is.na(fbox$t1_ss900+fbox$t2_ss900)
# carico dati
fbox_blocco <- read.csv("../data/formicobox_blocco_conteggi.csv", sep=";", dec=",")
merge(fbox_blocco[-c(10,14:23)],fbox,by="id_hive",all.x=T)->fbox_blocco_m #togliere 76 e 77???? [-(6:7),]
#fbox_blocco_m[which( apply(fbox_blocco_m[,3:12],1,sum)>200),]->fbox_blocco_m
as.Date(c("2012/7/15","2012/07/18","2012/7/22","2012/07/26","2012/7/30","2012/08/3","2012/08/7","2012/08/8","2012/08/10","2012/08/13"))->Dates.cad
fbox_blocco_m[fbox_blocco_m$tratt=="ctr",c(3:12)]->cadute_ctr
fbox_blocco_m[fbox_blocco_m$tratt=="fbox",c(3:12)]->cadute_fbox
dim(cadute_ctr)[1]->num_ctr #numero di alveari nell'esperimento
dim(cadute_fbox)[1]->num_fbox
plot(Dates.cad,apply(cadute_fbox,2,mean),type="l") #andamento medio caduta
plot(Dates.cad,apply(cadute_ctr,2,mean),type="l")
#plot(apply(fbox_blocco_m[,c(3:12)],1,sum),fbox_blocco_m$)
#boxplot cadute, usare caduta giornaliera e non dati assoluti (3 e 4 giorni)
boxplot(cadute_ctr,names=(Dates.cad-as.Date("2012/07/12")),xlab="giorni dal trattamento",ylab="acari caduti")
lines(x=c(7.5,7.5),y=c(0,max(cadute_ctr)),lwd=3,col="red")
text(7.5,max(cadute_ctr),"trattamento di controllo",adj=1,col="red")
boxplot(cadute_fbox,names=(Dates.cad-as.Date("2012/07/12")))
lines(x=c(7.5,7.5),y=c(0,max(cadute_fbox)),lwd=3,col="red")
text(7.5,max(cadute_fbox),"trattamento di controllo",adj=1,col="red")
boxplot(cadute_fbox[1:7],add=F,col="red",names=(Dates.cad-as.Date("2012/07/12"))[1:7]) #confronto efficacia sotto opercolo
# #tb ta cb ca
# #ht.efficacy()
# apply(fbox_blocco_m[which(fbox_blocco_m$tratt=="fbox"),3:9],1,sum)->tb
# apply(fbox_blocco_m[which(fbox_blocco_m$tratt=="fbox"),10:12],1,sum)->ta
# apply(fbox_blocco_m[which(fbox_blocco_m$tratt=="ctr"),3:9],1,sum)->cb
# apply(fbox_blocco_m[which(fbox_blocco_m$tratt=="ctr"),10:12],1,sum)->ca
# ht.efficacy(tb,ta,cb,ca)
# ht.efficacy(tb,ta,cb,ca)->ht.cad
# mean(ht.efficacy(tb,ta,cb,ca))
# boxplot(ht.efficacy(tb,ta,cb,ca))
# henderson tilton su zucchero
fbox_blocco_m$t1_ss900[which(fbox_blocco_m$tratt=="fbox")]->tb
fbox_blocco_m$t2_ss900[which(fbox_blocco_m$tratt=="fbox")]->ta
fbox_blocco_m$t1_ss900[which(fbox_blocco_m$tratt=="ctr")]->cb
fbox_blocco_m$t2_ss900[which(fbox_blocco_m$tratt=="ctr")]->ca
ht.efficacy(tb,ta,cb,ca)
ht.efficacy(tb,ta,cb,ca)->ht.sug
mean(ht.efficacy(tb,ta,cb,ca))
boxplot(ht.efficacy(tb,ta,cb,ca))
#correlazione zucchero a t2-cadute in blocco nel controllo
plot(apply(fbox_blocco_m[,10:12],1,sum),fbox_blocco_m$t2_ss900/9,ylab="zucchero %",xlab="cadute",main="correlazione zucchero t2-cadute in blocco ctr")
#pearson
cor(fbox_blocco_m$t2_ss900/9, apply(fbox_blocco_m[,10:12],1,sum))
#regressione per origine
lm(fbox_blocco_m$t2_ss900/9~0+apply(fbox_blocco_m[,10:12],1,sum))->linear_model
abline(linear_model)
summary(linear_model)
#numero medio di api post blocco api/campione varroe/api/campione
100/linear_model$coefficients
#idem senza 76 e 77
fbox_blocco_m->fbox_blocco_m_old
fbox_blocco_m[-c(6,7),]->fbox_blocco_m
#correlazione zucchero a t2-cadute in blocco nel controllo
plot(apply(fbox_blocco_m[,10:12],1,sum),fbox_blocco_m$t2_ss900/9,ylab="zucchero %",xlab="cadute",main="correlazione zucchero t2-cadute in blocco ctr")
#pearson
cor(fbox_blocco_m$t2_ss900/9, apply(fbox_blocco_m[,10:12],1,sum))
#regressione per origine
lm(fbox_blocco_m$t2_ss900/9~0+apply(fbox_blocco_m[,10:12],1,sum))->linear_model
abline(linear_model)
summary(linear_model)
#numero medio di api post blocco api/campione varroe/api/campione
100/linear_model$coefficients
#ripristino dati
View(fbox_blocco_m)
boxplot(fboxi_fb$t1_ht.eff)
plot(Dates.cad,apply(cadute_fbox,2,mean),type="l") #andamento medio caduta
plot(Dates.cad,apply(cadute_ctr,2,mean),type="l")
#plot(apply(fbox_blocco_m[,c(3:12)],1,sum),fbox_blocco_m$)
#boxplot cadute, usare caduta giornaliera e non dati assoluti (3 e 4 giorni)
boxplot(cadute_ctr,names=(Dates.cad-as.Date("2012/07/12")),xlab="giorni dal trattamento",ylab="acari caduti")
lines(x=c(7.5,7.5),y=c(0,max(cadute_ctr)),lwd=3,col="red")
text(7.5,max(cadute_ctr),"trattamento di controllo",adj=1,col="red")
boxplot(cadute_fbox,names=(Dates.cad-as.Date("2012/07/12")))
lines(x=c(7.5,7.5),y=c(0,max(cadute_fbox)),lwd=3,col="red")
text(7.5,max(cadute_fbox),"trattamento di controllo",adj=1,col="red")
boxplot(cadute_fbox[1:7],add=F,col="red",names=(Dates.cad-as.Date("2012/07/12"))[1:7]) #confronto efficacia sotto opercolo
# #tb ta cb ca
# #ht.efficacy()
# apply(fbox_blocco_m[which(fbox_blocco_m$tratt=="fbox"),3:9],1,sum)->tb
# apply(fbox_blocco_m[which(fbox_blocco_m$tratt=="fbox"),10:12],1,sum)->ta
# apply(fbox_blocco_m[which(fbox_blocco_m$tratt=="ctr"),3:9],1,sum)->cb
# apply(fbox_blocco_m[which(fbox_blocco_m$tratt=="ctr"),10:12],1,sum)->ca
# ht.efficacy(tb,ta,cb,ca)
# ht.efficacy(tb,ta,cb,ca)->ht.cad
# mean(ht.efficacy(tb,ta,cb,ca))
# boxplot(ht.efficacy(tb,ta,cb,ca))
# henderson tilton su zucchero
fbox_blocco_m$t1_ss900[which(fbox_blocco_m$tratt=="fbox")]->tb
fbox_blocco_m$t2_ss900[which(fbox_blocco_m$tratt=="fbox")]->ta
fbox_blocco_m$t1_ss900[which(fbox_blocco_m$tratt=="ctr")]->cb
fbox_blocco_m$t2_ss900[which(fbox_blocco_m$tratt=="ctr")]->ca
ht.efficacy(tb,ta,cb,ca)
ht.efficacy(tb,ta,cb,ca)->ht.sug
mean(ht.efficacy(tb,ta,cb,ca))
boxplot(ht.efficacy(tb,ta,cb,ca))
#correlazione zucchero a t2-cadute in blocco nel controllo
plot(apply(fbox_blocco_m[,10:12],1,sum),fbox_blocco_m$t2_ss900/9,ylab="zucchero %",xlab="cadute",main="correlazione zucchero t2-cadute in blocco ctr")
#pearson
cor(fbox_blocco_m$t2_ss900/9, apply(fbox_blocco_m[,10:12],1,sum))
#regressione per origine
lm(fbox_blocco_m$t2_ss900/9~0+apply(fbox_blocco_m[,10:12],1,sum))->linear_model
abline(linear_model)
summary(linear_model)
#numero medio di api post blocco api/campione varroe/api/campione
boxplot(ht.efficacy(tb,ta,cb,ca))->prova
prova
plot(prova)
print(prova)
str(prova)
boxplot(prova)
boxplot(ht.efficacy(tb,ta,cb,ca))->prova
str(1L)
str(1)
as.integer(1)
str(as.integer(1))
as.integer(1)/2
?complete.cases
y <- c("a", "b", NA, "d", NA, "f")
compareVersion
compareVersion()
complete.cases(y)
?dump
